# =============================================================================
# Legacy Modernization Checker - 環境設定ファイル
# =============================================================================
# 使用方法:
#   1. このファイルをコピーして `.env` を作成
#   2. プロジェクトに合わせて各値を編集
#   3. scripts/run_checks_local.sh または .bat を実行
#
# 注意: .env は .gitignore に追加することを推奨（プロジェクト固有設定のため）
# =============================================================================

# -----------------------------------------------------------------------------
# プロジェクト基本情報
# -----------------------------------------------------------------------------
# プロジェクト名（レポートのタイトルに使用）
PROJECT_NAME="My Project"

# プロジェクトタイプ（複数選択可、カンマ区切り）
# 選択肢: maven, gradle, npm, yarn, pnpm
# 例: "maven" / "npm" / "maven,npm"
PROJECT_TYPE="maven"

# -----------------------------------------------------------------------------
# ソースコードパス（SASTスキャン対象）
# -----------------------------------------------------------------------------
# スキャン対象のソースディレクトリ（カンマ区切りで複数指定可）
# 例: "src" / "app-web/src,app-batch/src" / "backend/src,frontend/src"
# 空の場合はプロジェクトルート全体をスキャン
SCAN_PATHS=""

# スキャン除外パス（カンマ区切り）
# 例: "node_modules,dist,build,target,.git"
SCAN_EXCLUDE="node_modules,dist,build,target,.git,vendor"

# -----------------------------------------------------------------------------
# 言語別設定
# -----------------------------------------------------------------------------
# Java/Kotlin スキャンを有効化 (true/false)
ENABLE_JAVA_SCAN="true"

# TypeScript/JavaScript スキャンを有効化 (true/false)
ENABLE_TS_SCAN="true"

# Python スキャンを有効化 (true/false)
ENABLE_PYTHON_SCAN="false"

# -----------------------------------------------------------------------------
# ビルド設定（Maven/Gradle）
# -----------------------------------------------------------------------------
# Maven/Gradle ルートディレクトリ（pom.xml/build.gradle の場所）
# 例: "." / "backend" / "services/api"
BUILD_ROOT="."

# テストスキップ (true/false)
SKIP_TESTS="false"

# -----------------------------------------------------------------------------
# npm/yarn 設定（フロントエンド）
# -----------------------------------------------------------------------------
# package.json のディレクトリ（複数の場合はカンマ区切り）
# 例: "." / "frontend" / "frontend,packages/ui"
NPM_ROOTS=""

# -----------------------------------------------------------------------------
# DAST（動的スキャン）設定
# -----------------------------------------------------------------------------
# DAST スキャンを有効化 (true/false)
ENABLE_DAST="true"

# アプリケーション起動コマンド
# 例: 
#   Maven: "mvn -B -ntp -pl app-web spring-boot:run"
#   npm:   "npm run start"
#   直接:  "java -jar target/app.jar"
APP_START_CMD="mvn -B -ntp spring-boot:run"

# アプリケーション起動ディレクトリ（APP_START_CMD を実行する場所）
# 例: "." / "app-web" / "backend"
APP_START_DIR="."

# アプリケーションのポート番号
APP_PORT="8080"

# ヘルスチェックエンドポイント（アプリ起動確認用）
# 例: "/actuator/health" / "/health" / "/api/health"
HEALTH_CHECK_PATH="/actuator/health"

# アプリケーション起動待機時間（秒）
APP_START_TIMEOUT="60"

# ZAP スキャン対象 URL（複数の場合はカンマ区切り）
# 空の場合は http://localhost:${APP_PORT} を使用
ZAP_TARGET_URLS=""

# -----------------------------------------------------------------------------
# Container Scan 設定
# -----------------------------------------------------------------------------
# Dockerfile のパス（複数の場合はカンマ区切り）
# 例: "Dockerfile" / "docker/app-web.Dockerfile" / "backend/Dockerfile,frontend/Dockerfile"
# 空の場合はファイルシステムスキャンのみ
DOCKERFILES=""

# -----------------------------------------------------------------------------
# レポート出力設定
# -----------------------------------------------------------------------------
# レポート出力ディレクトリ
REPORT_OUTPUT_DIR="reports"

# 重大度フィルター（Trivyで使用）
# 選択肢: CRITICAL / HIGH,CRITICAL / MEDIUM,HIGH,CRITICAL
SEVERITY_FILTER="HIGH,CRITICAL"

# -----------------------------------------------------------------------------
# カスタムルール設定
# -----------------------------------------------------------------------------
# Semgrep カスタムルールファイル（Java用）
SEMGREP_JAVA_RULES="tools/semgrep/.semgrep.yml"

# Semgrep カスタムルールファイル（TypeScript/JS用）
SEMGREP_TS_RULES="tools/semgrep/.semgrep-typescript.yml"

# ZAP Automation 設定ファイル
ZAP_CONFIG="tools/zap/automation.yaml"

# -----------------------------------------------------------------------------
# 高度な設定（通常は変更不要）
# -----------------------------------------------------------------------------
# Dockerイメージタグ（スキャン用の一時タグ）
DOCKER_SCAN_TAG="security-scan:local"

# 並列実行数（Semgrep）
SEMGREP_JOBS="4"

